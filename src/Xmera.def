BootStrap: library
From: debian:10

%runscript
#!/bin/bash
    source /app/env/bin/activate
    python "$@"

%post -c /bin/bash
    export DEBIAN_FRONTEND=noninteractive
    apt-get update
    apt install -y build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libsqlite3-dev libreadline-dev libffi-dev curl libbz2-dev make
    echo "download python"
    curl -O https://www.python.org/ftp/python/3.8.2/Python-3.8.2.tar.xz
    tar -xf Python-3.8.2.tar.xz
    cd Python-3.8.2
    ./configure --enable-optimizations --enable-loadable-sqlite-extensions
    make -j 4
    make install
    apt install -y python3-venv 

    mkdir /app && cd /app

    # install virtual environment
    python3 -m venv env
    chmod -R 777 /app

    source /app/env/bin/activate

    python3 -m pip install --upgrade pip

    python3 -m pip install fuzzywuzzy
    python3 -m pip install fuzzywuzzy[speedup]
    python3 -m pip install regex
    python3 -m pip install pandas
    python3 -m pip install numpy

    unset DEBIAN_FRONTEND

%environment

